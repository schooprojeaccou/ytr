const presentationData = [
  {
    "section": [
      "Reconciliation and Indigenous Populations of Canada",
      "",
      "",
      "",
      "",
      "",
      ""
    ],
    "parts": []
  },
  {
    "section": [
      "What is reconciliation?",
        "",
        "",
        "",
        "",
        "",
        "everychildmatters.jpeg"
    ],
    "parts": [
      [
        "Reconciliation is the process by which one can ‘make up’ for their mistakes. In the case of the Indigenous populations of Canada, this involves recognizing, understanding and resolving the past and grave mistreatments of the Indigenous peoples.",
        "",
        "",
        "",
        "",
        "",
        "everychildmatters.jpeg"
      ],
      [
        "Examples of reconciliation towards Indigenous peoples include, but are not limited to, protesting for, studying of, and supporting the Indigenous peoples and their cultures. These forms of reconciliation are not the only ones, nor are they alone sufficient, but it is still tremendously important and necessary to perform them, even if it is in a minor way. After all, if even a sole person sloths due to their perceived insignificance, all others shall sloth too due to their perceived insignificance.",
        "",
        "",
        "",
        "",
        "",
        "everychildmatters.jpeg"
      ]
    ]
  },
  {
    "section": [
      "Who are the Indigenous peoples of Canada?",
        "map.png",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "In Canada’s history, there were three main populations of Indigenous peoples: Métis, Inuit and the First Nations.",
        "map.png",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "It is important to note that they all have different histories and cultures, and categorizing them as one people can be harmful.",
        "map.png",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "What is the history of the Indigenous peoples of Canada?",
        "bigsnake.jpg",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "Before the arrival of the Europeans in the Americas, and hence Canada, the Indigenous peoples had lived on this land for thousands of years. For sustenance, the nomads hunted, gathered and fished, whilst the sedentarists engaged in agriculture. They fought wars, inherited culture and deepened their beliefs.",
        "bigsnake.jpg",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "They lived in groups, communities, clans and nations. They lived in families. There are six main Indigenous geographical groups. They are the Woodland First Nations, the Iroquoian First Nations, the Plains First Nations, the Plateau First Nations, the Pacific Coast First Nations, the First Nations of the Mackenzie and the Yukon River Basins.",
        "bigsnake.jpg",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "What are some tools, technologies and crafts of the Indigenous peoples?",
        "snowgoggles.jpg",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "The Indigenous peoples of Canada have produced many technologies, be it practical, for ease of life or otherwise. An example of one such technology is the Inuit’s snow goggles made of bone antler, allowing them to help protect their eyes from the reflections of the sun on the snow.",
        "snowgoggles.jpg",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Ultimately, their innovations have left a vital impact on the progression of modern day technology, yet it is not even a bit appreciated.",
        "snowgoggles.jpg",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "What discriminations do the Indigenous peoples face?",
        "",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "The Indigenous peoples have faced many, many discriminations. Even today, they receive less health care, less governmental financial aid, have higher unemployment rates, and have had their native lands stolen from them.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "They were treated as subhuman. They were treated as savage. They were forced into residential schools. They were victims.",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "What exactly are residential schools?",
        "thescream.jpg",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "Residential schools were a culturicide that lasted from the 18th century to the ends of the 20th century (~1700–~1990). Demanded by the Church, the Canadian government at the time hosted these institutions under the guise of “civilizing” the “uncivilized”. In truth, it was merely an evangelist forcing of religion and culture.",
        "thescream.jpg",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "They forced Indigenous children to attend the schools, stripped them of their identity, and placed them in the schools to force them to discard their language, tradition, culture, religion, identity and self and replace it with their own. This forceful, wasteful, hateful, harmful, vile and treacherous acculturation has caused immense trauma, mental and physical, to be dealt to the children.",
        "thescream.jpg",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Hiding the dead bodies and records as if it were not shameful, the combined death toll of the schools is not at all known.",
        "thescream.jpg",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "What has already been done for Indigenous peoples?",
        "",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "As a form of reconciliation against their wrong-doings, discriminations and hatefulnesses, the Canadian government officially recognized its fault and created the 94 calls to action to aid the Indigenous peoples, alongside the Truth and Reconciliation Commission of Canada.",
        "",
        "",
        "",
        "everychildmatters.jpeg",
        "",
        ""
      ],
      [
        "Additionally, Canada now has a national day, Orange Shirt Day, dedicated solely to the people who had endured the pain and trauma of Canada’s unforgivable crimes. Continually placing attention on Indigenous peoples’ sufferings, it is a valid form of reconciliation.",
        "",
        "",
        "",
        "everychildmatters.jpeg",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "What can you do?",
        "",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "The 94 calls to actions are not yet completed. Indigenous peoples still face discrimination. Do not fall into the belief that any actions you perform have little to no impact. Yes, perhaps one person alone cannot do anything by their own will. However, one person alone can call onto others. And they can call unto more. Yes, surely a group of people sharing one will can have an impact.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Do not ignore the hate.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Do not ignore the discrimination.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Do not ignore the Indigenous peoples.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Protest.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Garner attention.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Help the Indigenous peoples of Canada.",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Help the world.",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "Credits",
        "",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "HTML & CSS designing of the site - Hossein with slight use of AI<br>JavaScript functionality of the site - Hossein<br>Source Searching - Alborz<br>Source Verification - Alborz & Hossein<br>Retrieving Informations - Hossein & Alborz<br>Retrieving Images - Hossein<br>Writing - Hossein & Alborz<br>Improving and reformatting writing - Hossein<br>Meowing - Mr. Kitty Whiskers",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "We recognize that we are not a wholly reliable source on the topic of Indigenous history and culture.<br>We recognize the information here is not comprehensive.<br>We trust that you can do your own individual research.<br>This is solely for garnering attention.<br>May we reconcile and correct our wrongs.",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "References",
        "",
        "",
        "",
        "",
        "",
        ""
    ],
    "parts": [
      [
        "Government of Canada. (2024-06-13). Indigenous peoples and communities<br>Retrieved from https://www.rcaanc-cirnac.gc.ca/eng/1100100013785/1529102490303<br>Government of Canada. (2017-05-02). First Nations in Canada<br>Retrieved from https://www.rcaanc-cirnac.gc.ca/eng/1307460755710/1536862806124<br>Government of Canada. (2025-05-29). Indigenous history in Canada<br>Retrieved from https://www.rcaanc-cirnac.gc.ca/eng/1100100013778/1607903934135",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Government of Canada. (2025-09-29). The Residential School System National Historic Event<br>Retrieved from https://parks.canada.ca/culture/designation/evenement-event/sys-pensionnats-residential-school-sys<br>INDIGENOUS CORPORATE TRAINING inc. (2022-12-05). 8 Key Issues for Indigenous Peoples in Canada<br>Retrieved from: https://www.ictinc.ca/blog/8-key-issues-for-indigenous-peoples-in-canada<br>Government of Canada. (2025-09-17). Delivering on Truth and Reconciliation Commission Calls to Action<br>Retrieved from https://www.rcaanc-cirnac.gc.ca/eng/1524494530110/1557511412801",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Pawanka Fund. (2023). Indigenous Innovations Use of Indigenous Technologies<br>Retrieved from https://pawankafund.org/blog-news/indigenous-innovations-use-of-indigenous-technologies/",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  {
    "section": [
      "Image Sources",
      "",
      "",
      "",
      "",
      "",
      ""
    ],
    "parts": [
      [
        "Every Child Matters Vector Illustration. https://www.discovernelson.com/news/canada-day-2023/every-child-matters-vector-illustration/<br><br>Aboriginal and Treaty Rights Information System (ATRIS) Map https://geo.sac-isc.gc.ca/Collection_de_cartes-Map_room/index_en.html<br><br>Big Snake, Chief of the Blackfoot Indians, Recounting his War Exploits to Five Subordinate Chiefs. https://www.gallery.ca/collection/artwork/big-snake-chief-of-the-blackfoot-indians-recounting-his-war-exploits-to-five",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "Snow goggles. https://www.metmuseum.org/art/collection/search/751542<br><br>The Scream. https://www.aci-iac.ca/art-books/kent-monkman/key-works/the-scream/",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
    ]
  }
];

let totalSpots = -1; 
presentationData.forEach(section => {
  totalSpots++;
  totalSpots += section.parts.length;
});

let currentSpot = 0;
let isLoading = false;
let cancelLoad = false;
let selector = 0;
let part = 0;

const sectionStart = document.getElementById("section-start");
const sectionPart = document.getElementById("section-part");
const progressBar = document.getElementById("slider-bar");

const backgroundImage = document.getElementById("background-img");
const topLeftImage = document.getElementById("topleft-img");
const topRightImage = document.getElementById("topright-img");
const bottomLeftImage = document.getElementById("bottomleft-img");
const bottomRightImage = document.getElementById("bottomright-img");
const centerImage = document.getElementById("center-img");

function updateProgress() {
  const percentage = (currentSpot / totalSpots) * 100;
  progressBar.style.width = `${percentage}%`;
}

function getTitleOf(sectionObj) {
  return sectionObj.querySelector(".section-title");
}
function getTextOf(sectionObj) {
  return sectionObj.querySelector(".section-text");
}

function safeImageLoad(imgElement, src) {
  if (!src) {
    imgElement.style.display = "none";
    imgElement.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
  } else {
    imgElement.src = `images/${src}`;
    imgElement.style.display = "block";
  }
}

function applyImages(dataArr) {
  safeImageLoad(backgroundImage, dataArr[1]);
  safeImageLoad(topLeftImage, dataArr[2]);
  safeImageLoad(topRightImage, dataArr[3]);
  safeImageLoad(bottomLeftImage, dataArr[4]);
  safeImageLoad(bottomRightImage, dataArr[5]);
  safeImageLoad(centerImage, dataArr[6]);
}

function loadSection(sectionArr) {
  if (isLoading || cancelLoad) return;
  isLoading = true;
  updateProgress();

  sectionPart.style.display = "none";
  sectionStart.style.display = "block";

  const title = getTitleOf(sectionStart);
  title.textContent = sectionArr[0];

  applyImages(sectionArr);

  title.classList.remove("animate-up");
  void title.offsetWidth;
  title.classList.add("animate-up");

  setTimeout(() => { isLoading = false; }, 1000);
}

function loadPart(sectionName, partArr) {
  if (isLoading || cancelLoad) return;
  isLoading = true;
  updateProgress();

  sectionStart.style.display = "none";
  sectionPart.style.display = "block";

  const title = getTitleOf(sectionPart);
  const text = getTextOf(sectionPart);

  title.textContent = sectionName;
text.innerHTML = partArr[0]
  .replace(/\r?\n/g, "<br>");

  applyImages(partArr);

  title.classList.remove("animate-to-part");
  title.classList.add("animate-to-part");

  text.classList.remove("animate-up");
  void text.offsetWidth;
  text.classList.add("animate-up");

  setTimeout(() => { isLoading = false; }, 1000);
}

function upPart() {
  if (isLoading) return;
  cancelLoad = false;
  const oldSelector = selector;
  const oldPart = part;
  part++;
  currentSpot++;
  if (part > presentationData[selector]["parts"].length) {
    selector++;
    part = 0;
  }
  if (selector >= presentationData.length) {
    selector = oldSelector;
    part = oldPart;
    currentSpot--;
    cancelLoad = true;
  }
}

function downPart() {
  if (isLoading) return;
  cancelLoad = false;
  const oldSelector = selector;
  const oldPart = part;
  part--;
  currentSpot--;
  if (part < 0) {
    selector--;
    if (selector < 0) {
      selector = oldSelector;
      part = oldPart;
      currentSpot++;
      cancelLoad = true;
      return;
    }
    part = presentationData[selector]["parts"].length;
  }
}

function loadSelector() {
  if (isLoading) return;
  const selectedSection = presentationData[selector];
  const isNewSection = (part == 0);
  const sectionArr = selectedSection["section"];
  let sectionPartArr = selectedSection["parts"][part];
  if (!isNewSection) sectionPartArr = selectedSection["parts"][part - 1];
  if (isNewSection) {
    loadSection(sectionArr);
  } else {
    loadPart(sectionArr[0], sectionPartArr);
  }
}

function leftClick() {
  downPart();
  loadSelector();
}

function rightClick() {
  upPart();
  loadSelector();
}

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowRight") rightClick();
  if (e.key === "ArrowLeft") leftClick();
});
